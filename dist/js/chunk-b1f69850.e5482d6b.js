(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b1f69850"],{"1d6f":function(e,t,r){"use strict";var a=r("ac72"),i=r.n(a);i.a},"2ce6":function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"3b80":function(e,t,r){var a=r("2d2c"),i=r("2b11"),n=r("201d"),s=r("2ce6"),o="["+s+"]",l="​",c=RegExp("^"+o+o+"*"),p=RegExp(o+o+"*$"),d=function(e,t,r){var i={},o=n(function(){return!!s[e]()||l[e]()!=l}),c=i[e]=o?t(u):s[e];r&&(i[r]=c),a(a.P+a.F*o,"String",i)},u=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(p,"")),e};e.exports=d},"5ab7":function(e,t,r){var a=r("836e"),i=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},"612f":function(e,t,r){for(var a=r("5c07"),i=r("d753"),n=r("7f00"),s=r("4839"),o=r("c84b"),l=r("f03e"),c=r("f3ae"),p=c("iterator"),d=c("toStringTag"),u=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=i(f),m=0;m<g.length;m++){var _,y=g[m],b=f[y],h=s[y],v=h&&h.prototype;if(v&&(v[p]||o(v,p,u),v[d]||o(v,d,y),l[y]=u,b))for(_ in a)v[_]||n(v,_,a[_],!0)}},"634a":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"nodeOrderTable"}},[r("div",{attrs:{id:"tableHeader"}},[r("el-button",{staticClass:"rightButton",attrs:{type:"primary"},on:{click:e.exportData}},[e._v("导出数据")]),r("el-input",{attrs:{placeholder:"输入关键字搜索",clearable:"","prefix-icon":"el-icon-search"},on:{clear:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.keyword,callback:function(t){e.keyword="string"===typeof t?t.trim():t},expression:"keyword"}})],1),r("el-table",{attrs:{border:"",stripe:"",data:e.list[e.pageIndex],height:e.tableHeight,"row-class-name":e.getRowClassName,"row-key":"order_id","expand-row-keys":e.expandKeys},on:{"expand-change":e.handleExpand,"filter-change":e.handleFilter}},[r("el-table-column",{attrs:{type:"expand",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{attrs:{inline:"","label-width":"100px"}},[r("el-form-item",{attrs:{label:"收件人",prop:"receive_by"}},[r("el-input",{model:{value:t.row.detail.receive_by,callback:function(r){e.$set(t.row.detail,"receive_by","string"===typeof r?r.trim():r)},expression:"props.row.detail.receive_by"}})],1),r("el-form-item",{attrs:{label:"联系电话",prop:"mobile"}},[r("el-input",{model:{value:t.row.detail.mobile,callback:function(r){e.$set(t.row.detail,"mobile","string"===typeof r?r.trim():r)},expression:"props.row.detail.mobile"}})],1),r("el-form-item",{attrs:{label:"省份",prop:"province"}},[r("el-input",{model:{value:t.row.detail.province,callback:function(r){e.$set(t.row.detail,"province","string"===typeof r?r.trim():r)},expression:"props.row.detail.province"}})],1),r("el-form-item",{attrs:{label:"城市",prop:"city"}},[r("el-input",{model:{value:t.row.detail.city,callback:function(r){e.$set(t.row.detail,"city","string"===typeof r?r.trim():r)},expression:"props.row.detail.city"}})],1),r("el-form-item",{attrs:{label:"区县",prop:"area"}},[r("el-input",{model:{value:t.row.detail.area,callback:function(r){e.$set(t.row.detail,"area","string"===typeof r?r.trim():r)},expression:"props.row.detail.area"}})],1),r("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[r("el-input",{model:{value:t.row.detail.address,callback:function(r){e.$set(t.row.detail,"address","string"===typeof r?r.trim():r)},expression:"props.row.detail.address"}})],1),r("el-form-item",{attrs:{label:"物流公司",prop:"express_company"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.detail.express_company,callback:function(r){e.$set(t.row.detail,"express_company",r)},expression:"props.row.detail.express_company"}},e._l(e.computed_express_options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:"快递单号",prop:"express_no"}},[r("el-input",{model:{value:t.row.detail.express_no,callback:function(r){e.$set(t.row.detail,"express_no","string"===typeof r?r.trim():r)},expression:"props.row.detail.express_no"}})],1)],1),r("el-button",{staticClass:"updataBtn",attrs:{type:"primary"},on:{click:e.updateOrder}},[e._v("更新")])]}}])}),r("el-table-column",{attrs:{prop:"order_no",label:"订单编号",width:"90",align:"center"}}),r("el-table-column",{attrs:{prop:"trade_no",label:"交易流水号",width:"110",align:"center"}}),r("el-table-column",{attrs:{prop:"vip_no",label:"会员编号",width:"85",align:"center"}}),r("el-table-column",{attrs:{prop:"order_info",label:"订单信息",width:"290",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.package_info,function(t,a){return r("div",{key:a,staticClass:"package_inner"},[r("div",{staticClass:"package_left"},[e._v(e._s(t.package_name)+"：")]),r("div",{staticClass:"package_right"},e._l(t.product_list,function(t,a){return r("div",{key:a,staticClass:"product_inner"},[r("div",{staticClass:"product_left"},[e._v(e._s(t.product_name))]),r("div",{staticClass:"product_right"},[e._v("*"+e._s(t.qty))])])}),0)])})}}])}),r("el-table-column",{attrs:{prop:"total_fee",label:"订单金额",width:"85",align:"center"}}),r("el-table-column",{attrs:{prop:"is_pay",label:"支付状态",width:"100",align:"center","column-key":"is_pay",filters:e.payState,"filter-multiple":!1},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{size:"mini",type:e.payState.find(function(e){return e.value==t.row.is_pay}).tagType}},[e._v("\n          "+e._s(e.payState.find(function(e){return e.value==t.row.is_pay}).text)+"\n        ")])]}}])}),r("el-table-column",{attrs:{prop:"state",label:"订单状态",width:"100",align:"center","column-key":"state",filters:e.orderState,"filter-multiple":!1},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{size:"mini",type:e.orderState.find(function(e){return e.value===t.row.state}).tagType}},[e._v("\n          "+e._s(t.row.state)+"\n        ")])]}}])}),r("el-table-column",{attrs:{prop:"receive_by",label:"收件人",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"mobile",label:"联系电话",width:"115",align:"center"}}),r("el-table-column",{attrs:{prop:"buyer_msg",label:"买家留言",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"create_time",label:"下单时间",width:"100",align:"center"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["待发货"===t.row.state?r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.handleOperate(t.row.order_id,t.row.order_no,t.row.express_company,t.row.express_no)}}},[e._v("\n          发货\n        ")]):e._e(),"待签收"===t.row.state||"已签收"===t.row.state?r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.showExpress(t.row.order_id)}}},[e._v("\n          物流\n        ")]):e._e()]}}])})],1),r("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next","page-sizes":e.pagination.pageSizes,total:e.pagination.total,"page-size":e.pagination.pageSize,"current-page":e.pagination.page},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"current-change":e.changePage,"size-change":e.changeSize}}),r("el-dialog",{attrs:{id:"deliveryDialog",width:"400px",visible:e.deliveryDialogVisible},on:{"update:visible":function(t){e.deliveryDialogVisible=t}}},[r("div",[r("el-form",{attrs:{"label-width":"100px","label-position":"left"}},[r("el-form-item",{attrs:{label:"快递公司"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedExpressCompany,callback:function(t){e.selectedExpressCompany=t},expression:"selectedExpressCompany"}},e._l(e.computed_express_options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:"快递单号"}},[r("el-input",{attrs:{type:"number"},model:{value:e.selectedExpressNo,callback:function(t){e.selectedExpressNo=t},expression:"selectedExpressNo"}})],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.deliveryDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmDelivery}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{id:"expressDialog",width:"600px",visible:e.expressDialogVisible},on:{"update:visible":function(t){e.expressDialogVisible=t}}},[e.expressInfo?r("div",[r("p",[e._v("物流公司："+e._s(e.expressInfo.express_company))]),r("p",[e._v("物流单号："+e._s(e.expressInfo.express_no))]),e.expressInfo.express_traces.length?r("div",[r("p",[e._v("物流信息：")]),r("el-timeline",e._l(e.expressInfo.express_traces,function(t,a){return r("el-timeline-item",{key:a,attrs:{timestamp:t.AcceptStation}},[e._v("\n            "+e._s(t.AcceptTime)+"\n          ")])}),1)],1):r("p",[e._v("暂无物流信息")])]):e._e(),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.expressDialogVisible=!1}}},[e._v("关 闭")])],1)])],1)},i=[],n=r("cc80"),s=r.n(n),o=r("6fc8"),l=r.n(o),c=(r("612f"),r("7415"),r("e0c1"),r("93fe"),r("b06f"),r("3f47")),p=r("d722"),d=r("025e"),u={receive_by:"收件人",mobile:"收件人手机号码",province:"省份",city:"城市",area:"区县",address:"详细地址",express_company:"快递公司名称",express_no:"快递单号",order_no:"订单编号",trade_no:"交易流水号",vip_no:"会员编号",package_info:"订单信息",total_fee:"订单金额",is_pay:"支付状态",state:"订单状态",buyer_msg:"买家留言",order_time:"下单时间",member_name:"会员姓名",pay_time:"支付时间"},f={data:function(){return{tableHeight:document.getElementById(d["a"]).clientHeight-120-50-50,deliveryDialogVisible:!1,expressDialogVisible:!1,expressInfo:null,selectedOrderId:"",selectedOrderNo:"",selectedExpressCompany:"",selectedExpressNo:"",express_options:[],list:[],pagination:{total:0,pageSizes:[20,50,100,200],pageSize:20,page:1},orderState:[{text:"待付款",value:"待付款",tagType:"danger"},{text:"待发货",value:"待发货",tagType:"warning"},{text:"待签收",value:"待签收",tagType:"info"},{text:"已签收",value:"已签收",tagType:"success"}],payState:[{text:"未支付",value:"0",tagType:"danger"},{text:"已支付",value:"1",tagType:"success"}],keyword:"",selectedOrderState:"",selectedPayState:"",getRowClassName:function(e){var t=e.row;return"row-id-".concat(t.order_id)},expandKeys:[],expandId:"",updateExclude:["create_by","create_time","member_id","modify_by","modify_time","order_no","trade_no","vip_no","total_fee","is_pay","state","pay_time","buyer_msg","is_subscribe_push","subscribe_time","express_traces","confirm_receipt_time","confirm_receipt_by","package_info"]}},computed:{pageIndex:function(){return this.pagination.page-1},computed_express_options:function(){return this.express_options.map(function(e){return{value:e,label:e}})}},created:function(){this.getExpressCompany(),this.getOrderList()},methods:{getExpressCompany:function(){var e=this;this.$setLoadingTarget(document.body),Object(p["b"])().then(function(t){e.express_options=["中通速递","韵达快递"].concat(t.data.filter(function(e){return"中通速递"!==e&&"韵达快递"!==e}))})},getOrderList:function(){var e=this;this.$setLoadingTarget(document.body),Object(p["j"])({keyword:this.keyword,is_pay:this.selectedPayState,state:this.selectedOrderState,page:this.pagination.page,page_size:this.pagination.pageSize}).then(function(t){1===t.code&&(e.list[e.pageIndex]=t.data.items.map(function(e){return Object(c["a"])({},e,{detail:{}})}),e.pagination.total=Number(t.data.total),e.$forceUpdate())})},changePage:function(){void 0===this.list[this.pageIndex]&&this.getOrderList()},changeSize:function(e){this.pagination.pageSize=e,this.resetTable()},handleFilter:function(e){e.state instanceof Array&&(void 0!==e.state[0]?this.selectedOrderState=e.state[0]:this.selectedOrderState=""),e.is_pay instanceof Array&&(void 0!==e.is_pay[0]?this.selectedPayState=e.is_pay[0]:this.selectedPayState=""),this.resetTable()},search:function(){this.resetTable()},resetTable:function(){this.pagination.total=0,this.pagination.page=1,this.list=[],this.getOrderList()},handleExpand:function(e,t){this.expandKeys=[],this.expandId="";var r=t.map(function(e){return e.order_id});r.includes(e.order_id)&&(this.expandId=e.order_id,this.expandKeys.push(e.order_id),this.$nextTick(function(){document.querySelector(".row-id-".concat(e.order_id)).scrollIntoView()}),void 0===e.detail.order_id&&this.getOrderDetail(e))},handleOperate:function(e,t,r,a){this.selectedOrderId=e,this.selectedOrderNo=t,this.selectedExpressCompany=r,this.selectedExpressNo=a,this.deliveryDialogVisible=!0},confirmDelivery:function(){var e=this;this.$setLoadingTarget("#deliveryDialog .el-dialog"),Object(p["r"])({express_company:this.selectedExpressCompany,express_no:this.selectedExpressNo,order_id:this.selectedOrderId,order_no:this.selectedOrderNo}).then(function(t){if(1===t.code){var r=e.list[e.pageIndex].find(function(t){return t.order_id===e.selectedOrderId});r instanceof Object&&(r.state="待签收",r.express_company=e.selectedExpressCompany,r.express_no=e.selectedExpressNo,r.detail.state="待签收",r.detail.express_company=e.selectedExpressCompany,r.detail.express_no=e.selectedExpressNo),e.deliveryDialogVisible=!1,e.$message({message:"发货成功"})}else e.$message({message:t.msg,type:"error"})})},getOrderDetail:function(e){var t=this;this.$setLoadingTarget("#nodeOrderTable"),Object(p["i"])({order_id:e.order_id}).then(function(r){1===r.code?e.detail=Object(c["a"])({},r.data):t.$message({type:"error",message:r.msg})})},showExpress:function(e){var t=this;this.expressDialogVisible=!0,this.$setLoadingTarget("#expressDialog"),Object(p["i"])({order_id:e}).then(function(e){1===e.code?t.expressInfo=e.data:t.$message({type:"error",message:e.msg})})},updateOrder:function(){var e=this;this.$confirm("更新数据后不能复原，确定要更新？").then(function(){var t=e.list[e.pageIndex].find(function(t){return t.order_id===e.expandId}),r=Object(c["a"])({},t.detail);e.updateExclude.forEach(function(e){delete r[e]}),e.$setLoadingTarget("#nodeOrderTable"),Object(p["q"])(r).then(function(a){var i=a.msg,n="error";if(1===a.code)for(var s in i="更新数据成功",n="success",r)t[s]=r[s];e.$message({message:i,type:n})})}).catch(function(){})},exportData:function(){var e=this;this.$setLoadingTarget("#nodeOrderTable"),Object(p["h"])({keyword:this.keyword,is_pay:this.selectedPayState,state:this.selectedOrderState}).then(function(t){if(1===t.code){if(0===t.data.length)return e.$message({type:"error",message:"没有可以导出的数据"}),!1;var r=t.data.map(function(e){var t=l()(null);for(var r in e){var a=u[r];if("package_info"===r){var i="";e[r].forEach(function(e){var t="";e.product_list.forEach(function(e){t+="".concat(e.product_name,"*").concat(e.qty," ")}),i+="".concat(e.package_name,"（").concat(t,"）；")}),t[a]=i}else void 0!==a?t[a]=e[r]:t[r]=e[r]}return t});Object(d["b"])({filename:"订单".concat(Object(d["d"])()),filedata:JSON.parse(s()(r))})}else e.$message({type:"error",message:t.msg})})}}},g=f,m=(r("1d6f"),r("17cc")),_=Object(m["a"])(g,a,i,!1,null,"3b5626f0",null);t["default"]=_.exports},"6fc8":function(e,t,r){e.exports=r("fd92")},7415:function(e,t,r){"use strict";var a=r("2d2c"),i=r("ea02")(5),n="find",s=!0;n in[]&&Array(1)[n](function(){s=!1}),a(a.P+a.F*s,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r("68fb")(n)},"74de":function(e,t,r){var a=r("d635"),i=r("2b11");e.exports=function(e,t,r){if(a(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},9357:function(e,t,r){var a=r("471d");a(a.S,"Object",{create:r("8070")})},"93fe":function(e,t,r){"use strict";var a=r("2d2c"),i=r("74de"),n="includes";a(a.P+a.F*r("dd8b")(n),"String",{includes:function(e){return!!~i(this,e,n).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},ac72:function(e,t,r){},b06f:function(e,t,r){"use strict";var a=r("4839"),i=r("3301"),n=r("9b6d"),s=r("d62f"),o=r("1f51"),l=r("201d"),c=r("62af").f,p=r("78de").f,d=r("694f").f,u=r("3b80").trim,f="Number",g=a[f],m=g,_=g.prototype,y=n(r("04ac")(_))==f,b="trim"in String.prototype,h=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){t=b?t.trim():u(t,3);var r,a,i,n=t.charCodeAt(0);if(43===n||45===n){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+t}for(var s,l=t.slice(2),c=0,p=l.length;c<p;c++)if(s=l.charCodeAt(c),s<48||s>i)return NaN;return parseInt(l,a)}}return+t};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof g&&(y?l(function(){_.valueOf.call(r)}):n(r)!=f)?s(new m(h(t)),r,g):h(t)};for(var v,x=r("3a0f")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)i(m,v=x[w])&&!i(g,v)&&d(g,v,p(m,v));g.prototype=_,_.constructor=g,r("7f00")(a,f,g)}},cc80:function(e,t,r){e.exports=r("5ab7")},d62f:function(e,t,r){var a=r("b429"),i=r("d772").set;e.exports=function(e,t,r){var n,s=t.constructor;return s!==r&&"function"==typeof s&&(n=s.prototype)!==r.prototype&&a(n)&&i&&i(e,n),e}},d635:function(e,t,r){var a=r("b429"),i=r("9b6d"),n=r("f3ae")("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==i(e))}},d772:function(e,t,r){var a=r("b429"),i=r("4d65"),n=function(e,t){if(i(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{a=r("0709")(Function.call,r("78de").f(Object.prototype,"__proto__").set,2),a(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,r){return n(e,r),t?e.__proto__=r:a(e,r),e}}({},!1):void 0),check:n}},dd8b:function(e,t,r){var a=r("f3ae")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[a]=!1,!"/./"[e](t)}catch(i){}}return!0}},e0c1:function(e,t,r){"use strict";var a=r("2d2c"),i=r("0d0d")(!0);a(a.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r("68fb")("includes")},fd92:function(e,t,r){r("9357");var a=r("836e").Object;e.exports=function(e,t){return a.create(e,t)}}}]);
//# sourceMappingURL=chunk-b1f69850.e5482d6b.js.map